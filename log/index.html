<!DOCTYPE html>
<html lang="z">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    
    <title>Yan_1_20</title>
    <meta name="renderer" content="webkit">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <meta name="description" content="pop,pop,ret">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Yan_1_20">
    <meta name="twitter:description" content="pop,pop,ret">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Yan_1_20">
    <meta property="og:description" content="pop,pop,ret">

    
    <meta name="author" content="Yan_1_20">
    
    <link rel="stylesheet" href="/css/vno.css">
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css">

    
    <link rel="icon" href="/image/avatar-small.png">
    

    <meta name="generator" content="hexo"/>
    

    <link rel="canonical" href="http://yan-1-20.github.io/log/index.html"/>

                 
</head>

<body class="home-template no-js">
    <script src="//cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script>
    <script src="/js/main.js"></script>

    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>


    
    
<header class="panel-cover panel-cover--collapsed">



  <div class="panel-main">
    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">



        <a href="/" title="前往 Yan_1_20 的主页"><img src="/image/avatar.jpg" width="80" alt="Yan_1_20 logo" class="panel-cover__logo logo" /></a>
        <h1 class="panel-cover__title panel-title"><a href="/" title="link to homepage for Yan_1_20">Yan_1_20</a></h1>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">pop pop ret</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />

        <div class="navigation-wrapper">
          <div>
          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">
              <li class="navigation__item"><a href="/#blog" title="访问博客" class="blog-button">文章</a></li>
            
              <li class="navigation__item"><a href="/photoalbum/CrackMe.html">相册</a></li>
            
              <li class="navigation__item"><a href="/log">打卡</a></li>
            
              <li class="navigation__item"><a href="/about">关于</a></li>
            
            </ul>
          </nav>
          </div>
          <div>
          <nav class="cover-navigation navigation--social">
  <ul class="navigation">

  <!-- Weibo-->
  
  <li class="navigation__item">
    <a href="https://weibo.com/6016118396" title="我的微博" target="_blank">
      <i class='social fa fa-weibo'></i>
      <span class="label">Weibo</span>
    </a>
  </li> 


  <!-- Github -->
  
  <li class="navigation__item">
    <a href="https://github.com/Yan-1-20" title="查看我的GitHub主页" target="_blank">
      <i class='social fa fa-github'></i>
      <span class="label">Github</span>
    </a>
  </li>


<!-- Stack Overflow -->
        

  <!-- Google Plus -->
  

<!-- Facebook -->

  
<!-- Twitter -->

  



  </ul>
</nav>

          </div>
        </div>

      </div>

    </div>
    <div class="panel-cover--overlay cover-purple"></div>

  </div>



</header>


    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single">

  <header class="post-header">
    <h1 class="post-title"></h1>
  </header>

  <section class="post">
    <ul>
<li><font color="tomato" size="4">未打卡</font></li>
<li><font color="LightSkyBlue" size="4">打卡</font>



</li>
</ul>
<h1 id="August"><a href="#August" class="headerlink" title="August"></a>August</h1><ul>
<li><font color="LightSkyBlue" size="4">2018-09-04</font><ul>
<li>今天之前提交的两个cve号下来了，恭喜自己拿到人生的第一个<br>和第二个cve编号，然后说说最近的进展吧，最近我一直在苦于<br>优化afl执行的问题。因为我现在的样本速度太慢了。研究了一段<br>时间还是有点进展，那就是afl的持久模式，研究了几天发现持久<br>模式并不适用现在的目标程序，试了试持久模式的afl-clang-fast<br>编译器和对目标程序的优化以及放弃asan而选择 AFL_HARDEN作为<br>内存检测工具后，终于我的速度从不到100 sec变成 900sec了。<br>最近把持久模式的心得写一篇博客吧。</li>
</ul>
</li>
<li><p><font color="LightSkyBlue" size="4">2018-08-28</font></p>
<ul>
<li>目前这个项目基本上稳定了，接下来的任务对我来说就是两个，</li>
<li>源码审计</li>
<li><p>继续fuzz流程，分析崩溃</p>
<p>当然，尝了一次鲜之后，我明白需要不断的开阔视野不然就是固<br>步自封，今天找了project zero的一些文章，还有看了K0大佬的<br>内核学习博客，我打算尝试上手linux内核（windows闭源难度<br>更大），根据K0大佬的经验，我可能会先尝试复现漏洞，然后有<br>一定了解后，再说挖的事情(虽然我对kernel fuzz流程之前就有<br> 了解)，自己对漏洞的研究，反正就是这几个块，browser，kernel<br> ，pdf，图片音频视频库。攻击面这个问题，因为我现在是自由<br> 研究，那么就尝试一下kernel吧。</p>
</li>
</ul>
</li>
<li><p><font color="LightSkyBlue" size="4">2018-08-23</font></p>
<ul>
<li>用内存当文件系统来跑成功了，但是这是基于我的内存比较大<br>16GB的情况，因为生成的临时文件生成速度达到了300MB/S,我写的<br>清理脚本 速度控制在0.3s 勉强能保持内存不会被撑满。速度在<br>0.1s的时候则会感觉机器速度有点下降，0.2~0.3s最好。然后开始<br>了afl改造的工作，大概定位到了要改afl的话，样本函数要改的位置</li>
</ul>
</li>
<li><p><font color="LightSkyBlue" size="4">2018-08-22</font></p>
<ul>
<li>差不多断了18天的打卡，但是期间事情一直没放下，运气还比较<br>好，挖到第一个二进制漏洞，heap-overflow.然后第一次提交了<br>cve漏洞,厂商已经认同了漏洞，并进行修复，接着就是等cve编号<br>了。这18天里解决了很多问题，也深入了不少。<ul>
<li>解决了fuzz的时候磁盘空间一直增加问题，这是目标文件会<br>生成很多临时文件，建议到根目录下用du -h –max-depth=1<br>查看是那个文件夹在不断增长（一般是tmp）,然后写脚本去清理</li>
<li>解决了样本最小化的tmin的辅助脚本开发。</li>
<li>解决了asan 返回null视为崩溃的问题。即是设置asan的选项<br>然后又添加了内存越界访问检测，和内存泄漏检测<blockquote>
<p>export ASAN_OPTIONS=abort_on_error=1:detect_leaks=0:symbolize=0:allocator_may_return_null=1</p>
</blockquote>
</li>
<li>解决了推荐使用32位asan ，但是又想在64位上运行的问题，<br>使用CFLAGS=”-m32” 编译32位目标程序即可,但是需要添加<br>32位的编译库和运行库。<blockquote>
<p>sudo apt-get install build-essential module-assistant<br>sudo apt-get install gcc-multilib g++-multilib<br>sudo dpkg –add-architecture i386<br>sudo apt-get update<br>sudo apt-get install libc6:i386 libncurses5:i386 libstdc++6:i386</p>
</blockquote>
</li>
<li>解决了crash 很多需要自己去一个个审查的情况，改了一<br>个脚本，可以根据通过asan的输出来过滤重要的crash</li>
<li>解决了明明加了 -g  但是asan崩溃时，没有符号，但是可以<br>下符号断点的问题，主要原因是gcc版本过低，gcc-4.8有这个<br>问题（asan是gcc-4.8才并入gcc的），升级到gcc4.9就可以了<br>ubuntu升级gcc的方法：<blockquote>
<p><a href="https://blog.csdn.net/qingrenufo/article/details/78661513" target="_blank" rel="external">https://blog.csdn.net/qingrenufo/article/details/78661513</a></p>
</blockquote>
</li>
<li>正常尝试解决afl运行时很吃磁盘的情况，目前打算把tmp<br>挂载为内存，用内存文件系统来减少磁盘的压力。</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li><font color="LightSkyBlue" size="4">2018-08-04</font><ul>
<li>做了测试，好像单独跑-d 随机跑和单独跑主模式，并不会<br>使磁盘使用快速上升，这样我可以试试先用-d跑出来很多路径<br>之后 再给主模式对随机跑出来这些路径进行深度变异，因为<br>感觉随机跑路径出的比主模式快几倍吧。嗯，然后我打算试<br>试不要asan跑。（我无意发现跑fuzz的时候如果fuzz 因为样<br>本执行的时间太长，整个界面卡住的情况下磁盘会马上增加，<br>不知道是不是这样的。）</li>
</ul>
</li>
</ul>
<ul>
<li><font color="LightSkyBlue" size="4">2018-08-03</font><ul>
<li>多次测试崩溃的样本，发现加了asan的crash 有些并不会<br>崩溃。去查了afl的文档，发现asan的内存检测非常严格，即使<br>内存分配失败返回NULL也会报crash,当然样本里还是有一些，<br>超大内存导致的分配失败。但是主从模式下的磁盘很快被用完<br>的问题还是没有解决，然后又试了试不用主从模式来跑，感觉<br>效果也不明显。</li>
</ul>
</li>
</ul>
<ul>
<li><p><font color="LightSkyBlue" size="4">2018-08-02</font></p>
<ul>
<li>　主从模式跑了一晚上 路径数到了3600 有几十个crash，<br>但是有一个问题，500G的虚拟机硬盘一晚上就跑完了，后来<br>去查了一下是和虚拟机的设计有关，虚拟机内的文件一旦创建<br>即使在虚拟机删除了 这个文件占用的空间也不会被释放。所以<br>很快就把磁盘跑满了，暂时不知道怎么解决</li>
</ul>
</li>
<li><p><font color="LightSkyBlue" size="4">2018-08-01</font></p>
<ul>
<li>　8月第一天，基于昨天的成果，对afl的设置进行修改，改了<br>asan的部分，然后添加了主从模式，即一个变异的主进程和多个<br>随机运行的从进程，随机运行的从进程会把随机得到的新路径样本<br>给变异的主进程进行变异，从而提高主进程变异的速度，以及提高<br>cpu的利用率。很nice的得到了很多崩溃，然后我查看了一下崩溃<br>原因，暂时的崩溃是和分配内存有关，既是 我命中了一个关于分配<br>内存大小的 元数据。嗯，周末应该会好好写下博客，这个真的值得<br>写下了。</li>
</ul>
</li>
</ul>
<h1 id="July"><a href="#July" class="headerlink" title="July"></a>July</h1><ul>
<li><p><font color="LightSkyBlue" size="4">2018-07-31</font></p>
<ul>
<li>　7月最后一天，还是说个总结吧，这段时间开始尝试深入理解afl，<br> 对它的开发文档和代码开始阅读，先读的开发文档，发现了更多<br> 国内资料里面没有提到的高级用法和一些tips,以及解了我一个疑<br> 惑为什么我编译程序的时候加了asan 运行afl的时候 -m 指定的内<br> 存就贼大？这需要32位。。。。还有同一台机器上并行运行多个<br> afl的方法等等。嗯，文档看的差不多了，接下来就是尝试进行改<br> afl的fuzz策略进行专门的私人定制。嗯，关于afl的高级使用<br> 什么的，慢慢也打算写一篇博文。</li>
</ul>
</li>
<li><p><font color="LightSkyBlue" size="4">2018-07-30</font></p>
<ul>
<li>　自己搭了一个vps</li>
</ul>
</li>
<li><p><font color="LightSkyBlue" size="4">2018-07-29</font></p>
<ul>
<li>　打算深入研究afl,看了一些讲解之后，有些启发，我也想自己深读afl。改造afl.</li>
</ul>
</li>
<li><p><font color="LightSkyBlue" size="4">2018-07-28</font></p>
<ul>
<li>　接着看了腾讯大牛lcatro<a href="https://github.com/lcatro/Fuzzing-ImageMagick" target="_blank" rel="external">Fuzzing-ImageMagick</a><br> 使用afl 对ImageMagick 程序进行fuzz 的列子，我跟着这个流程走了一边。搭了一个fuzz机器</li>
</ul>
</li>
<li><p><font color="LightSkyBlue" size="4">2018-07-27</font></p>
<ul>
<li>　看了github里的一个腾讯大牛lcatro<a href="https://github.com/lcatro/How-to-Read-Source-and-Fuzzing" target="_blank" rel="external">How-to-Read-Source-and-Fuzzing</a><br> 觉得很不错，很有收获。</li>
</ul>
</li>
<li><font color="LightSkyBlue" size="4">2018-07-26</font><ul>
<li>　开始尝试afl，对afl使用基本了解了</li>
</ul>
</li>
<li><font color="tomato" size="4">2018-07-25</font><ul>
<li>　未打卡(私事)</li>
</ul>
</li>
<li><font color="tomato" size="4">2018-07-24</font><ul>
<li>　未打卡(私事)</li>
</ul>
</li>
<li><font color="tomato" size="4">2018-07-23</font><ul>
<li>　未打卡(私事)</li>
</ul>
</li>
<li><font color="tomato" size="4">2018-07-22</font><ul>
<li>　未打卡(私事)</li>
</ul>
</li>
<li><font color="tomato" size="4">2018-07-21</font><ul>
<li>　未打卡(私事)</li>
</ul>
</li>
<li><font color="tomato" size="4">2018-07-20</font><ul>
<li>　未打卡(私事)</li>
</ul>
</li>
<li><font color="LightSkyBlue" size="4">2018-07-19</font><ul>
<li>　完成了ogginfo 项目的编译，写一篇博文</li>
</ul>
</li>
<li><p><font color="LightSkyBlue" size="4">2018-07-18</font></p>
<ul>
<li>　[1]研究了一下winafl fuzz 带GUI程序的问题，发现暂时真找不到退出GUI程序方法，<br>可能真的只能Fuzz DLL,然后接下来可能会试试AFL的上手和深入学习winAFL吧<br>[2]开始了CVE-2018-5146复现的准备工作，准备复现的poc.<br>对ogg项目尝试编译 [3]读了安全客的一篇<a href="https://www.anquanke.com/post/id/151898" target="_blank" rel="external">使用IDApython进行漏洞挖掘的文章</a>，觉<br>得挺有意思的，想深入学习一下这个IDApython 来进行自动化漏洞代码分析.</li>
</ul>
</li>
<li><p><font color="tomato" size="4">2018-07-17</font></p>
<ul>
<li>　未打卡，昨天熬夜晚上太累，加上工作繁忙</li>
</ul>
</li>
<li><p><font color="LightSkyBlue" size="4">2018-07-16</font></p>
<ul>
<li>　完成了winafl的使用方法研究，和编写了winAfl的dll 测试用例</li>
</ul>
</li>
</ul>
<ul>
<li><font color="tomato" size="4">2018-07-15</font><ul>
<li>　今天就水了水吧，给未来3个月定了一个计划加油，希望自己坚持打卡！</li>
</ul>
</li>
</ul>

  </section>
</article>

<!-- 来必力City版安装代码 -->
<div id="lv-container" data-id="city" data-uid="MTAyMC8zNTkzNC8xMjQ3MA==">
<script type="text/javascript">
   (function(d, s) {
       var j, e = d.getElementsByTagName(s)[0];

       if (typeof LivereTower === 'function') { return; }

       j = d.createElement(s);
       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
       j.async = true;

       e.parentNode.insertBefore(j, e);
   })(document, 'script');
</script>
<noscript>为正常使用来必力评论功能请激活JavaScript</noscript>
</div>
<!-- City版安装代码已完成 -->


            <footer class="footer">
    <span class="footer__copyright">
        &copy; 2018 Yan_1_20 - 本站点采用 <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>

    </span>
    <span class="footer__copyright">
             - 基于 <a href="http://hexo.io">Hexo</a> 搭建，使用 <a href="https://github.com/monniya/hexo-theme-new-vno ">new-vno</a> 主题，由<a href="https://monniya.com ">@Monniya</a> 修改自 <a href="https://github.com/lenbo-ma/hexo-theme-vno" target="_blank">Vno</a>, 原创出自<a href="http://github.com/onevcat/vno" target="_blank">onevcat</a>
         </span>


  
</footer>

        </div>
    </div>

     
    
    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?yan120";
            var s = document.getElementsByTagName("script")[0]; 
            s.parentNode.insertBefore(hm, s);
        })();
    </script>



    <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>


</body>
</html>
